<!DOCTYPE HTML>
<html>
<head>
<title>2.c</title>
<style type = "text/css">
.orderList {
tab-size:4;
font-family: Consolas, "Courier New", Courier, mono, serif;
font-size: 12px;
background-color: #E7E5DC;
width: 96%;
overflow: auto;
margin: 18px 0 18px 0 !important;
padding-left: 45px;
padding-top: 1px;}
li { list-style: decimal-leading-zero;
list-style-position: outside !important;
border-left: 3px solid #6CE26C;
background-color: #F8F8F8;
color: #5C5C5C;
padding: 0 3px 0 10px !important;
margin: 0 !important;
line-height: 14px; }
span {
color: #000000;}
.keyword {color: #006699; font-weight: bold;}
.comment {color: #008282;}
.literal {color: #0000ff;}
.preprocessor {color: grey;}
#backToTop {
position: fixed; bottom: 50px; right: 70px;}
</style>
</head>
<body>
<div class="sourceCode">
<div>
<div class="tools"></div>
</div>
<pre>
<ol class="orderList"><li><span><span class = "preprocessor">#include &lt;conio.h&gt;</span></span></li><li><span><span class = "preprocessor">#include &lt;stdio.h&gt;</span></span></li><li><span><span class = "preprocessor">#include &lt;string.h&gt;</span></span></li><li><span><span class = "preprocessor">#define TRUE 1</span></span></li><li><span><span class = "preprocessor">#define FALSE 0</span></span></li><li><span><span class = "preprocessor">#include &lt;stdlib.h&gt;</span></span></li><li><span><span class = "preprocessor">#define	MIN_INPUT 0x20</span></span></li><li><span><span class = "preprocessor">#define	MAX_INPUT 0x7e</span></span></li><li><span><span class = "preprocessor">#include &lt;ctype.h&gt;</span></span></li><li><span></span></li><li><span><span class = "comment">/*</span></span></li><li><span><span class = "comment">* 所有功能有此函数实现：</span></span></li><li><span><span class = "comment">* pszPw ： 保存密码的缓冲</span></span></li><li><span><span class = "comment">* iMaxSize ：最大的密码长度，该长度必须小于缓冲区大小。</span></span></li><li><span><span class = "comment">* 返回值为TRUE为成功获取密码。总是返回TRUE</span></span></li><li><span><span class = "comment">* 返回值为TRUE为成功获取密码。总是返回TRUE*/</span></span></li><li><span></span></li><li><span><span class = "keyword">int</span> R_L_K(<span class = "keyword">char</span>*s)</span></li><li><span>{</span></li><li><span>    <span class = "keyword">if</span>(strlen(s)&gt;=6&&strlen(s)&lt;=<span class = "literal">12</span>)<span class = "keyword">return</span> <span class = "literal">1</span>;</span></li><li><span>    <span class = "keyword">else</span> <span class = "keyword">return</span> <span class = "literal">0</span>;</span></li><li><span>}</span></li><li><span><span class = "keyword">int</span> rightful_key(<span class = "keyword">char</span> *s)</span></li><li><span>{</span></li><li><span>    <span class = "keyword">int</span> flag=<span class = "literal">0</span>;</span></li><li><span>    <span class = "keyword">while</span>(*s)</span></li><li><span>    {</span></li><li><span>        <span class = "keyword">if</span>(! isalnum(*s++)){flag=<span class = "literal">1</span>;<span class = "keyword">break</span>;}</span></li><li><span>    }</span></li><li><span>    <span class = "keyword">if</span>(flag)<span class = "keyword">return</span> <span class = "literal">0</span>;</span></li><li><span>    <span class = "keyword">return</span> <span class = "literal">1</span>;</span></li><li><span>}</span></li><li><span><span class = "keyword">int</span> scanf_key(<span class = "keyword">char</span>* ps)</span></li><li><span>{</span></li><li><span>    <span class = "keyword">int</span> MaxSize=<span class = "literal">80</span>;</span></li><li><span><span class = "keyword">unsigned</span> <span class = "keyword">char</span> ch;</span></li><li><span><span class = "keyword">while</span>(<span class = "literal">1</span>){printf(<span class = "literal">"      (密码由6~12个数字或字母构成)\n"</span>);</span></li><li><span>printf(<span class = "literal">"              (返回上一界面 * )\n"</span>);</span></li><li><span><span class = "keyword">int</span> i=<span class = "literal">0</span>;</span></li><li><span><span class = "keyword">int</span> bIsEcho=TRUE;</span></li><li><span><span class = "keyword">while</span>( ( ch = (<span class = "keyword">unsigned</span> <span class = "keyword">char</span>)getch() ) && i &lt; MaxSize )</span></li><li><span>{</span></li><li><span>bIsEcho=TRUE;</span></li><li><span><span class = "keyword">if</span> ( ch == <span class = "literal">13</span>)<span class = "comment">//回车</span></span></li><li><span>{</span></li><li><span>ps[i++]=<span class = "literal">0</span>;</span></li><li><span><span class = "keyword">break</span>;</span></li><li><span>}</span></li><li><span><span class = "keyword">else</span> <span class = "keyword">if</span> ( ch &gt;= MIN_INPUT && ch &lt;= MAX_INPUT) <span class = "comment">/*所有可打印字符</span></span></li><li><span><span class = "comment">/*所有可打印字符*/</span></span></li><li><span></span></li><li><span>{</span></li><li><span>ps[i++]=ch;</span></li><li><span>}</span></li><li><span><span class = "keyword">else</span> <span class = "keyword">if</span> ( ch == <span class = "literal">8</span> && i&gt; <span class = "literal">0</span> )	<span class = "comment">/*退格键</span></span></li><li><span><span class = "comment">/*退格键*/</span></span></li><li><span></span></li><li><span>{</span></li><li><span>ps[i--] = <span class = "literal">0</span>;</span></li><li><span>bIsEcho = FALSE;</span></li><li><span>putchar( ch );</span></li><li><span>putchar( ' ' );</span></li><li><span>putchar( ch );</span></li><li><span>}</span></li><li><span><span class = "keyword">else</span></span></li><li><span>bIsEcho = FALSE;</span></li><li><span><span class = "keyword">if</span>(bIsEcho)</span></li><li><span>putchar('*');</span></li><li><span>}</span></li><li><span>ps[i]=<span class = "literal">0</span>;</span></li><li><span><span class = "keyword">if</span>(!strcmp(ps,<span class = "literal">"*"</span>)){system(<span class = "literal">"CLS"</span>);<span class = "keyword">return</span> <span class = "literal">0</span>;}</span></li><li><span><span class = "keyword">if</span>(!R_L_K(ps)){printf(<span class = "literal">"\n密码长度不正确请重新输入\n"</span>);<span class = "keyword">continue</span>;}</span></li><li><span><span class = "keyword">if</span>(!rightful_key(ps)){printf(<span class = "literal">"\n输入含有不合法字符请重新输入密码\n"</span>);<span class = "keyword">continue</span>;}</span></li><li><span>system(<span class = "literal">"CLS"</span>);<span class = "keyword">return</span> <span class = "literal">1</span>;</span></li><li><span>}</span></li><li><span>}</span></li><li><span><span class = "comment">/*int scanf_key(char *key)</span></span></li><li><span><span class = "comment">{</span></span></li><li><span><span class = "comment">  char input[100];</span></span></li><li><span><span class = "comment">  char ch;</span></span></li><li><span><span class = "comment">  int i;</span></span></li><li><span><span class = "comment"></span></span></li><li><span><span class = "comment">      while(1)</span></span></li><li><span><span class = "comment">  {</span></span></li><li><span><span class = "comment">      printf("      (密码由6~12个数字或字母构成)\n");</span></span></li><li><span><span class = "comment">      printf("              (返回上一界面 * )\n");</span></span></li><li><span><span class = "comment">  memset(input,0,10);</span></span></li><li><span><span class = "comment">  i = 0;</span></span></li><li><span><span class = "comment">  while((ch = getch()) != '\r')</span></span></li><li><span><span class = "comment">   {</span></span></li><li><span><span class = "comment">   if( ch == '\b')</span></span></li><li><span><span class = "comment">    {</span></span></li><li><span><span class = "comment">    putchar('\b');</span></span></li><li><span><span class = "comment">    putchar(0);</span></span></li><li><span><span class = "comment">    putchar('\b');</span></span></li><li><span><span class = "comment">    i--;</span></span></li><li><span><span class = "comment">    }</span></span></li><li><span><span class = "comment">   else{</span></span></li><li><span><span class = "comment">    input[i++] = ch;</span></span></li><li><span><span class = "comment">    putchar('*');</span></span></li><li><span><span class = "comment">     }</span></span></li><li><span><span class = "comment">   }</span></span></li><li><span><span class = "comment">   if(!strcmp(input,"*")){system("CLS");return 0;}</span></span></li><li><span><span class = "comment">   if(!R_L_K(input)){printf("\n密码长度不正确请重新输入\n");continue;}</span></span></li><li><span><span class = "comment">   if(!rightful_key(input)){printf("\n输入含有不合法字符请重新输入密码\n");continue;}</span></span></li><li><span><span class = "comment">   strcpy(key,input);</span></span></li><li><span><span class = "comment"> system("CLS");return 1;</span></span></li><li><span><span class = "comment">  }</span></span></li><li><span><span class = "comment"></span></span></li><li><span><span class = "comment">}</span></span></li><li><span><span class = "comment">}*/</span></span></li><li><span></span></li><li><span><span class = "keyword">int</span> Input_key(<span class = "keyword">char</span> *key)</span></li><li><span>{</span></li><li><span>   <span class = "keyword">int</span> MaxSize=<span class = "literal">80</span>;</span></li><li><span>   <span class = "keyword">unsigned</span> <span class = "keyword">char</span> ch;</span></li><li><span>   <span class = "keyword">char</span> ps[MaxSize];</span></li><li><span>  printf(<span class = "literal">"      (退出输入并返回返回上一界面  *  )\n"</span>);</span></li><li><span>  <span class = "keyword">while</span>(<span class = "literal">1</span>)</span></li><li><span>  {</span></li><li><span></span></li><li><span> <span class = "keyword">int</span> i=<span class = "literal">0</span>;</span></li><li><span><span class = "keyword">int</span> bIsEcho=TRUE;</span></li><li><span><span class = "keyword">while</span>( ( ch = (<span class = "keyword">unsigned</span> <span class = "keyword">char</span>)getch() ) && i &lt; MaxSize )</span></li><li><span>{</span></li><li><span>bIsEcho=TRUE;</span></li><li><span><span class = "keyword">if</span> ( ch == <span class = "literal">13</span>)<span class = "comment">//回车</span></span></li><li><span>{</span></li><li><span>ps[i++]=<span class = "literal">0</span>;</span></li><li><span><span class = "keyword">break</span>;</span></li><li><span>}</span></li><li><span><span class = "keyword">else</span> <span class = "keyword">if</span> ( ch &gt;= MIN_INPUT && ch &lt;= MAX_INPUT) <span class = "comment">/*所有可打印字符</span></span></li><li><span><span class = "comment">/*所有可打印字符*/</span></span></li><li><span></span></li><li><span>{</span></li><li><span>ps[i++]=ch;</span></li><li><span>}</span></li><li><span><span class = "keyword">else</span> <span class = "keyword">if</span> ( ch == <span class = "literal">8</span> && i&gt; <span class = "literal">0</span> )	<span class = "comment">/*退格键</span></span></li><li><span><span class = "comment">/*退格键*/</span></span></li><li><span></span></li><li><span>{</span></li><li><span>ps[i--] = <span class = "literal">0</span>;</span></li><li><span>bIsEcho = FALSE;</span></li><li><span>putchar( ch );</span></li><li><span>putchar( ' ' );</span></li><li><span>putchar( ch );</span></li><li><span>}</span></li><li><span><span class = "keyword">else</span></span></li><li><span>bIsEcho = FALSE;</span></li><li><span><span class = "keyword">if</span>(bIsEcho)</span></li><li><span>putchar('*');</span></li><li><span>}</span></li><li><span>ps[i]=<span class = "literal">0</span>;</span></li><li><span>  <span class = "keyword">if</span>(!<span class = "preprocessor">#strcmp(ps,"*"))return 2;</span></span></li><li><span>  <span class = "keyword">if</span>(strcmp(key,ps)==<span class = "literal">0</span>)<span class = "keyword">return</span> <span class = "literal">1</span>;</span></li><li><span>  <span class = "keyword">return</span> <span class = "literal">0</span>;</span></li><li><span>  printf(<span class = "literal">"\n"</span>);</span></li><li><span>  }</span></li><li><span>}</span></li><li><span></span></li><li><span><span class = "keyword">int</span> main()</span></li><li><span>{</span></li><li><span>    <span class = "keyword">char</span> key[<span class = "literal">20</span>];</span></li><li><span>    <span class = "keyword">while</span>(<span class = "literal">1</span>){</span></li><li><span>    printf(<span class = "literal">"\n%d\n"</span>,Input_key(<span class = "literal">"123456"</span>));</span></li><li><span>    }</span></li><li><span>}</span></li></ol>
</pre>
</div>
<a id="backToTop" href="#top">
<img src="D:\代码\JavaStudy\Code2Html\top.png"onerror="nofind();" width="48" alt="Back to top" title="Back to top"></a>
<script type="text/javascript">
function nofind(){
var img=event.srcElement;
img.src="http://www.easyicon.net/api/resize_png_new.php?id=1180466&size=48"; 
img.onerror=null;}
</script>
</body>
</html>
