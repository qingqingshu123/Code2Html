<!DOCTYPE HTML>
<html>
<head>
<title>7.java</title>
<style type = "text/css">
.orderList {
tab-size:4;
font-family: Consolas, "Courier New", Courier, mono, serif;
font-size: 12px;
background-color: #E7E5DC;
width: 96%;
overflow: auto;
margin: 18px 0 18px 0 !important;
padding-left: 45px;
padding-top: 1px;}
li { list-style: decimal-leading-zero;
list-style-position: outside !important;
border-left: 3px solid #6CE26C;
background-color: #F8F8F8;
color: #5C5C5C;
padding: 0 3px 0 10px !important;
margin: 0 !important;
line-height: 14px; }
span {
color: #000000;}
.keyword {color: #006699; font-weight: bold;}
.comment {color: #008282;}
.literal {color: #0000ff;}
#backToTop {
position: fixed; bottom: 50px; right: 70px;}
</style>
</head>
<body>
<div class="sourceCode">
<div>
<div class="tools"></div>
</div>
<pre>
<ol class="orderList"><li><span><span class = "keyword">package</span> GUI;</span></li><li><span></span></li><li><span><span class = "keyword">import</span> java.io.*;</span></li><li><span><span class = "keyword">import</span> java.util.*;</span></li><li><span><span class = "keyword">import</span> java.awt.*;</span></li><li><span></span></li><li><span><span class = "keyword">import</span> javax.swing.*;</span></li><li><span><span class = "keyword">import</span> javax.swing.event.*;</span></li><li><span><span class = "keyword">import</span> javax.swing.filechooser.*;</span></li><li><span><span class = "keyword">import</span> javax.swing.tree.*;</span></li><li><span></span></li><li><span><span class = "comment">/**</span></span></li><li><span><span class = "comment"> * &lt;p&gt;Title: OpenSwing&lt;/p&gt;</span></span></li><li><span><span class = "comment"> * &lt;p&gt;Description: JFileTree 文件树&lt;/p&gt;</span></span></li><li><span><span class = "comment"> * &lt;p&gt;Copyright: Copyright (c) 2004&lt;/p&gt;</span></span></li><li><span><span class = "comment"> * &lt;p&gt;Company: &lt;/p&gt;</span></span></li><li><span><span class = "comment"> * @author &lt;a href="mailto:sunkingxie@hotmail.com"&gt;SunKing&lt;/a&gt;</span></span></li><li><span><span class = "comment"> * @version 1.0</span></span></li><li><span><span class = "comment"> */</span></span></li><li><span></span></li><li><span></span></li><li><span><span class = "keyword">public</span> <span class = "keyword">class</span> JFileTree <span class = "keyword">extends</span> JTree <span class = "keyword">implements</span> Serializable{</span></li><li><span>    <span class = "keyword">public</span> <span class = "keyword">static</span> <span class = "keyword">final</span> FileSystemView fileSystemView =</span></li><li><span>        FileSystemView.getFileSystemView();</span></li><li><span>    DefaultTreeModel treeModel;</span></li><li><span>    <span class = "keyword">private</span> java.io.FileFilter filter = <span class = "keyword">null</span>;</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     * 只浏览目录的目录树</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> JFileTree(){</span></li><li><span>        <span class = "keyword">this</span>(<span class = "keyword">new</span> DirFilter());</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     * 指定过滤器的文件树</span></span></li><li><span><span class = "comment">     * @param filter FileFilter 指定过滤器</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> JFileTree(java.io.FileFilter filter){</span></li><li><span>        FileNode root = <span class = "keyword">new</span> FileNode(fileSystemView.getRoots()[<span class = "literal">0</span>], filter);</span></li><li><span>        treeModel = <span class = "keyword">new</span> DefaultTreeModel(root);</span></li><li><span>        root.explore();</span></li><li><span>        treeModel.nodeStructureChanged(root);</span></li><li><span>        <span class = "keyword">this</span>.setModel(treeModel);</span></li><li><span>        addTreeExpansionListener(<span class = "keyword">new</span> JFileTreeExpandsionListener());</span></li><li><span>        setCellRenderer(<span class = "keyword">new</span> JFileTreeCellRenderer());    </span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     * 取得当前选择的节点</span></span></li><li><span><span class = "comment">     * @return FileNode</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> FileNode getSelectFileNode(){</span></li><li><span>        TreePath path = getSelectionPath();</span></li><li><span>        <span class = "keyword">if</span>(path == <span class = "keyword">null</span> || path.getLastPathComponent() == <span class = "keyword">null</span>){</span></li><li><span>            <span class = "keyword">return</span> <span class = "keyword">null</span>;</span></li><li><span>        }</span></li><li><span>        <span class = "keyword">return</span>(FileNode)path.getLastPathComponent();</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     * 设置当前选择的节点</span></span></li><li><span><span class = "comment">     * @param f FileNode</span></span></li><li><span><span class = "comment">     * @throws Exception</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> <span class = "keyword">void</span> setSelectFileNode(FileNode f) <span class = "keyword">throws</span> Exception{</span></li><li><span>        <span class = "keyword">this</span>.setSelectFile(f.getFile());</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     * 取得当前选择的文件或目录</span></span></li><li><span><span class = "comment">     * @return File</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> File getSelectFile(){</span></li><li><span>        FileNode node = getSelectFileNode();</span></li><li><span>        <span class = "keyword">return</span> node == <span class = "keyword">null</span> ? <span class = "keyword">null</span> : node.getFile();</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     * 设置当前选择的文件或目录</span></span></li><li><span><span class = "comment">     * @param f File</span></span></li><li><span><span class = "comment">     * @throws Exception</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> <span class = "keyword">void</span> setSelectFile(File f) <span class = "keyword">throws</span> Exception{</span></li><li><span>        FileNode node = <span class = "keyword">this</span>.expandFile(f);</span></li><li><span>        TreePath path = <span class = "keyword">new</span> TreePath(node.getPath());</span></li><li><span>        <span class = "keyword">this</span>.scrollPathToVisible(path);</span></li><li><span>        <span class = "keyword">this</span>.setSelectionPath(path);</span></li><li><span>        <span class = "keyword">this</span>.repaint();</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     * 展开指定的文件或目录</span></span></li><li><span><span class = "comment">     * @param f File</span></span></li><li><span><span class = "comment">     * @return FileNode</span></span></li><li><span><span class = "comment">     * @throws Exception</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> FileNode expandFile(File f) <span class = "keyword">throws</span> Exception{</span></li><li><span>        <span class = "keyword">if</span>(!f.exists()){</span></li><li><span>            <span class = "keyword">throw</span> <span class = "keyword">new</span> java.io.FileNotFoundException(f.getAbsolutePath());</span></li><li><span>        }</span></li><li><span>        Vector vTemp = <span class = "keyword">new</span> Vector();</span></li><li><span>        File fTemp = f;</span></li><li><span>        <span class = "keyword">while</span>(fTemp != <span class = "keyword">null</span>){</span></li><li><span>            vTemp.add(fTemp);</span></li><li><span>            fTemp = fileSystemView.getParentDirectory(fTemp);</span></li><li><span>        }</span></li><li><span></span></li><li><span>        FileNode nParent = (FileNode)treeModel.getRoot();</span></li><li><span>        <span class = "keyword">for</span>(<span class = "keyword">int</span> i = vTemp.size() - <span class = "literal">1</span>; i &gt;= <span class = "literal">0</span>; i--){</span></li><li><span>            fTemp = (File)vTemp.get(i);</span></li><li><span>            nParent.explore();</span></li><li><span>            <span class = "keyword">for</span>(<span class = "keyword">int</span> j = <span class = "literal">0</span>; j &lt; nParent.getChildCount(); j++){</span></li><li><span>                FileNode nChild = (FileNode)nParent.getChildAt(j);</span></li><li><span>                <span class = "keyword">if</span>(nChild.getFile().equals(fTemp)){</span></li><li><span>                    nParent = nChild;</span></li><li><span>                }</span></li><li><span>            }</span></li><li><span>        }</span></li><li><span>        <span class = "keyword">return</span> nParent;</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Title: OpenSwing&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Description: 文件树修饰器&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Copyright: Copyright (c) 2004&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Company: &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * @author &lt;a href="mailto:sunkingxie@hotmail.com"&gt;SunKing&lt;/a&gt;</span></span></li><li><span><span class = "comment">     * @version 1.0</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">class</span> JFileTreeCellRenderer <span class = "keyword">extends</span> DefaultTreeCellRenderer{</span></li><li><span>        <span class = "keyword">public</span> Component getTreeCellRendererComponent(JTree tree, Object value,</span></li><li><span>            <span class = "keyword">boolean</span> sel, <span class = "keyword">boolean</span> expanded,</span></li><li><span>            <span class = "keyword">boolean</span> leaf, <span class = "keyword">int</span> row,</span></li><li><span>            <span class = "keyword">boolean</span> hasFocus){</span></li><li><span>            <span class = "keyword">super</span>.getTreeCellRendererComponent(tree, value, sel, expanded, leaf,</span></li><li><span>                                               row,</span></li><li><span>                                               hasFocus);</span></li><li><span>            <span class = "keyword">try</span>{</span></li><li><span>                FileNode node = (FileNode)value;</span></li><li><span>                closedIcon = fileSystemView.getSystemIcon(((FileNode)value).</span></li><li><span>                    getFile());</span></li><li><span>                openIcon = closedIcon;</span></li><li><span>                setIcon(closedIcon);</span></li><li><span>            } <span class = "keyword">catch</span>(Exception ex){</span></li><li><span>            }</span></li><li><span>            <span class = "keyword">return</span> <span class = "keyword">this</span>;</span></li><li><span>        }</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Title: OpenSwing&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Description: 文件树展开事件监听器&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Copyright: Copyright (c) 2004&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Company: &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * @author &lt;a href="mailto:sunkingxie@hotmail.com"&gt;SunKing&lt;/a&gt;</span></span></li><li><span><span class = "comment">     * @version 1.0</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">class</span> JFileTreeExpandsionListener <span class = "keyword">implements</span> TreeExpansionListener{</span></li><li><span>        <span class = "keyword">public</span> JFileTreeExpandsionListener(){}</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">void</span> treeExpanded(TreeExpansionEvent event){</span></li><li><span>            TreePath path = event.getPath();</span></li><li><span>            <span class = "keyword">if</span>(path == <span class = "keyword">null</span> || path.getLastPathComponent() == <span class = "keyword">null</span>)</span></li><li><span>                <span class = "keyword">return</span>;</span></li><li><span>            setCursor(<span class = "keyword">new</span> Cursor(Cursor.WAIT_CURSOR));</span></li><li><span>            FileNode node = (FileNode)path.getLastPathComponent();</span></li><li><span>            node.explore();</span></li><li><span>            JTree tree = (JTree)event.getSource();</span></li><li><span>            DefaultTreeModel treeModel = (DefaultTreeModel)tree.getModel();</span></li><li><span>            treeModel.nodeStructureChanged(node);</span></li><li><span>            setCursor(<span class = "keyword">new</span> Cursor(Cursor.DEFAULT_CURSOR));</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">void</span> treeCollapsed(TreeExpansionEvent event){}</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Title: OpenSwing&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Description:文件节点 &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Copyright: Copyright (c) 2004&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Company: &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * @author &lt;a href="mailto:sunkingxie@hotmail.com"&gt;SunKing&lt;/a&gt;</span></span></li><li><span><span class = "comment">     * @version 1.0</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> <span class = "keyword">static</span> <span class = "keyword">class</span> FileNode <span class = "keyword">extends</span> DefaultMutableTreeNode{</span></li><li><span>        <span class = "keyword">private</span> <span class = "keyword">boolean</span> explored = <span class = "keyword">false</span>;</span></li><li><span>        <span class = "keyword">private</span> java.io.FileFilter filter = <span class = "keyword">null</span>;</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> FileNode(File file, java.io.FileFilter filter){</span></li><li><span>            <span class = "keyword">if</span>(filter == <span class = "keyword">null</span>){</span></li><li><span>                <span class = "keyword">this</span>.filter = <span class = "keyword">new</span> DirFilter();</span></li><li><span>            } <span class = "keyword">else</span>{</span></li><li><span>                <span class = "keyword">this</span>.filter = filter;</span></li><li><span>            }</span></li><li><span>            setUserObject(file);</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">boolean</span> getAllowsChildren(){</span></li><li><span>            <span class = "keyword">return</span> isDirectory();</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">boolean</span> isDirectory(){</span></li><li><span>            <span class = "keyword">return</span>!isLeaf();</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">boolean</span> isLeaf(){</span></li><li><span>            <span class = "keyword">return</span> getFile().isFile();</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> File getFile(){</span></li><li><span>            <span class = "keyword">return</span>(File)getUserObject();</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">boolean</span> isExplored(){</span></li><li><span>            <span class = "keyword">return</span> explored;</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">void</span> setExplored(<span class = "keyword">boolean</span> b){</span></li><li><span>            explored = b;</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> String toString(){</span></li><li><span>            <span class = "keyword">if</span>(getFile() <span class = "keyword">instanceof</span> File)</span></li><li><span>                <span class = "keyword">return</span> fileSystemView.getSystemDisplayName((File)getFile());</span></li><li><span>            <span class = "keyword">else</span></span></li><li><span>                <span class = "keyword">return</span> getFile().toString();</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "comment">/**</span></span></li><li><span><span class = "comment">         * 展开节点</span></span></li><li><span><span class = "comment">         */</span></span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">void</span> explore(){</span></li><li><span>        	</span></li><li><span>            <span class = "keyword">if</span>(!explored){</span></li><li><span>                explored = <span class = "keyword">true</span>;</span></li><li><span>                File file = getFile();</span></li><li><span>                <span class = "comment">// 如果这里使用 file.listFiles(filter) 有BUG</span></span></li><li><span>                File[] children = file.listFiles();</span></li><li><span>                <span class = "keyword">if</span>(children == <span class = "keyword">null</span> || children.length == <span class = "literal">0</span>){</span></li><li><span>                    <span class = "keyword">return</span>;</span></li><li><span>                }</span></li><li><span>                <span class = "comment">// 过滤后排序,选加入排序后的目录, 再加入排序后的文件</span></span></li><li><span>                ArrayList listDir = <span class = "keyword">new</span> ArrayList();</span></li><li><span>                ArrayList listFile = <span class = "keyword">new</span> ArrayList();</span></li><li><span>                <span class = "keyword">for</span>(<span class = "keyword">int</span> i = <span class = "literal">0</span>; i &lt; children.length; ++i){</span></li><li><span>                    File f = children[i];</span></li><li><span>                    <span class = "keyword">if</span>(filter.accept(f)){</span></li><li><span>                        <span class = "keyword">if</span>(f.isDirectory()){</span></li><li><span>                            listDir.add(f);</span></li><li><span>                        }<span class = "keyword">else</span>{</span></li><li><span>                            listFile.add(f);</span></li><li><span>                        }</span></li><li><span>                    }</span></li><li><span>                }</span></li><li><span>                Collections.sort(listDir);</span></li><li><span>                Collections.sort(listFile);</span></li><li><span>                <span class = "keyword">for</span>(<span class = "keyword">int</span> i = <span class = "literal">0</span>; i &lt; listDir.size(); i++){</span></li><li><span>                    add(<span class = "keyword">new</span> FileNode((File)listDir.get(i),filter));</span></li><li><span>                }</span></li><li><span>                <span class = "keyword">for</span>(<span class = "keyword">int</span> i = <span class = "literal">0</span>; i &lt; listFile.size(); i++){</span></li><li><span>                    add(<span class = "keyword">new</span> FileNode((File)listFile.get(i),filter));</span></li><li><span>                }</span></li><li><span>            }</span></li><li><span>        }</span></li><li><span>    }</span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Title: OpenSwing&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Description:目录过滤器 &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Copyright: Copyright (c) 2004&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Company: &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * @author &lt;a href="mailto:sunkingxie@hotmail.com"&gt;SunKing&lt;/a&gt;</span></span></li><li><span><span class = "comment">     * @version 1.0</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> <span class = "keyword">static</span> <span class = "keyword">class</span> DirFilter <span class = "keyword">implements</span> java.io.FileFilter{</span></li><li><span>         <span class = "keyword">public</span> <span class = "keyword">boolean</span> accept(File pathname){</span></li><li><span>             <span class = "keyword">return</span> pathname.isDirectory();</span></li><li><span>         }</span></li><li><span>    }</span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Title: OpenSwing&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Description: 所有文件过滤器&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Copyright: Copyright (c) 2004&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Company: &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * @author &lt;a href="mailto:sunkingxie@hotmail.com"&gt;SunKing&lt;/a&gt;</span></span></li><li><span><span class = "comment">     * @version 1.0</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> <span class = "keyword">static</span> <span class = "keyword">class</span> AllFileFilter <span class = "keyword">implements</span> java.io.FileFilter{</span></li><li><span>         <span class = "keyword">public</span> <span class = "keyword">boolean</span> accept(File pathname){</span></li><li><span>             <span class = "keyword">return</span> <span class = "keyword">true</span>;</span></li><li><span>         }</span></li><li><span>    }</span></li><li><span>    <span class = "comment">/**</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Title: OpenSwing&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Description:扩展名过滤器 &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Copyright: Copyright (c) 2004&lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * &lt;p&gt;Company: &lt;/p&gt;</span></span></li><li><span><span class = "comment">     *</span></span></li><li><span><span class = "comment">     * @author &lt;a href="mailto:sunkingxie@hotmail.com"&gt;SunKing&lt;/a&gt;</span></span></li><li><span><span class = "comment">     * @version 1.0</span></span></li><li><span><span class = "comment">     */</span></span></li><li><span></span></li><li><span>    <span class = "keyword">public</span> <span class = "keyword">static</span> <span class = "keyword">class</span> ExtensionFilter <span class = "keyword">implements</span> java.io.FileFilter{</span></li><li><span>        String extensions[];</span></li><li><span>        <span class = "keyword">public</span> ExtensionFilter(String extensions[]){</span></li><li><span>            <span class = "keyword">this</span>.extensions = <span class = "keyword">new</span> String[extensions.length];</span></li><li><span>            <span class = "keyword">for</span>(<span class = "keyword">int</span> i = <span class = "literal">0</span>; i &lt; extensions.length; i++){</span></li><li><span>                <span class = "keyword">this</span>.extensions[i] = extensions[i].toLowerCase();</span></li><li><span>            }</span></li><li><span>        }</span></li><li><span></span></li><li><span>        <span class = "keyword">public</span> <span class = "keyword">boolean</span> accept(File pathname){</span></li><li><span>            <span class = "keyword">if</span>(pathname.isDirectory()){</span></li><li><span>                <span class = "keyword">return</span> <span class = "keyword">true</span>;</span></li><li><span>            }</span></li><li><span>            String name = pathname.getName().toLowerCase();</span></li><li><span>            <span class = "keyword">for</span>(<span class = "keyword">int</span> i = <span class = "literal">0</span>; i &lt; extensions.length; i++){</span></li><li><span>                <span class = "keyword">if</span>(name.endsWith(<span class = "keyword">this</span>.extensions[i])){</span></li><li><span>                    <span class = "keyword">return</span> <span class = "keyword">true</span>;</span></li><li><span>                }</span></li><li><span>            }</span></li><li><span>            <span class = "keyword">return</span> <span class = "keyword">false</span>;</span></li><li><span>        }</span></li><li><span>    }</span></li><li><span></span></li><li><span>    <span class = "comment">/*public static void main(String[] args){</span></span></li><li><span><span class = "comment">        JFrame frame = new JFrame("JFileTree Demo");</span></span></li><li><span><span class = "comment">        frame.setSize(600, 400);</span></span></li><li><span><span class = "comment">        JFileTree tree = new JFileTree();</span></span></li><li><span><span class = "comment">        try{</span></span></li><li><span><span class = "comment">            tree.setSelectFile(new File("C:/"));</span></span></li><li><span><span class = "comment">        } catch(Exception ex){</span></span></li><li><span><span class = "comment">            ex.printStackTrace();</span></span></li><li><span><span class = "comment">        }</span></span></li><li><span><span class = "comment">        Container pContent = frame.getContentPane();</span></span></li><li><span><span class = "comment">        pContent.setLayout(new BorderLayout());</span></span></li><li><span><span class = "comment">LINECOMMENT        JPanel pNorth = new JPanel(new GridLayout(1,1));</span></span></li><li><span><span class = "comment">        JPanel pCenter = new JPanel(new GridLayout(1,1));</span></span></li><li><span><span class = "comment">LINECOMMENT        pNorth.add(new JLabel("Directory only"));</span></span></li><li><span><span class = "comment">LINECOMMENT        pNorth.add(new JLabel("All file"));</span></span></li><li><span><span class = "comment">LINECOMMENT        pNorth.add(new JLabel("Directory and *.doc,*.txt file"));</span></span></li><li><span><span class = "comment">          pCenter.add(new JScrollPane(tree));</span></span></li><li><span><span class = "comment">LINECOMMENT        pCenter.add(new JScrollPane(new JFileTree(new AllFileFilter())));</span></span></li><li><span><span class = "comment">LINECOMMENT        pCenter.add(new JScrollPane(new JFileTree(</span></span></li><li><span><span class = "comment">LINECOMMENT            new ExtensionFilter(new String[]{"doc", "txt"}))));</span></span></li><li><span><span class = "comment">LINECOMMENT        pContent.add(pNorth, BorderLayout.NORTH);</span></span></li><li><span><span class = "comment">        pContent.add(pCenter, BorderLayout.CENTER);</span></span></li><li><span><span class = "comment">        frame.setVisible(true);</span></span></li><li><span><span class = "comment">    }*/</span></span></li><li><span></span></li><li><span>}</span></li></ol>
</pre>
</div>
<a id="backToTop" href="#top">
<img src="D:\代码\JavaStudy\Code2Html\top.png"onerror="nofind();" width="48" alt="Back to top" title="Back to top"></a>
<script type="text/javascript">
function nofind(){
var img=event.srcElement;
img.src="http://www.easyicon.net/api/resize_png_new.php?id=1180466&size=48"; 
img.onerror=null;}
</script>
</body>
</html>
